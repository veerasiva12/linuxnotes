ju5tD1@lcr0mA

####LB####
#
https://192.168.8.253/xui/?nocache=1636510677116
https://192.168.20.252/xui/?nocache=1636510603479
Username : justdial
Password : Justd!aldev0psadmin

#####zoom##
75635706862
556317
#################3
mailq issue edit /etc/resolv.cfg
nameserver 115.112.18.130
nameserver 115.112.18.22
nameserver 192.168.1.3

httaaap://178.29.0.123/nagios/ mumbai

http://172.29.8.123/nagios/ dehli

http://172.29.16.123/nagios/ kolkata

http://172.29.26.123/nagios/ bangalore

http://172.29.32.123/nagios/ chennai

http://172.29.40.123/nagios/ pune

http://172.29.50.123/nagios/ hydrabad

http://192.168.35.123/nagios/ahmedabad

192.168.35.171 ahmed
192.168.39.171 mumbai
192.168.43.171 delhi
192.168.44.171 ban
192.168.45.171 chennai
192.168.46.171 hydrabad
192.168.47.171 kol
192.168.48.171 pune

IRO 227
TME 237------
DE/CS 217----Rohit kaul

To Change password for mombainoc

Login
sudo -i
passwd mumbainoc (username)
p@lMspr1ng
#################################################################################################
check load on multiple servers

SH_ARGS='-q -o StrictHostKeyChecking=no -o UserKnownHostsFile=/dev/null'

for i in `cat servers.txt`; do echo $i; sshpass -p ju5tD1@lcr0mA ssh -q ${SSH_ARGS} bhavesh@"$i" 'w|grep "load"';done

######################################################################################################
User name : development

Password : dj33_vk55_MNT

http://192.168.12.250:8080/login?from=%2F------jenkins

http://192.168.12.234:999/inv/pages/disk.html ----new inventory

http://192.168.12.234:999/inv/pages/index.html------new inveoty

http://172.29.50.100/itteam.htm

172.29.64.48:9000/flagstatus.php

http://192.168.12.234:999/webporting_slave_status_qq.php

http://172.29.64.48:9000/panindia_status/1.html

http://172.29.64.64/~sachinthore/final_report_100.html

http://beta.justdial.com/shift/schedule.php?date=latest

find /var/lib/SQL -type f -size +1G | xargs du -hsc | sort -rh

###for i in 172.29.{0,8,16,26,32,40,50}.213 192.168.35.213 192.168.17.213 ;do scp tbl_top_5_percent_company_callcnt_searches_consolidated_180619.sql bhavesh@$i:;done

sed -i 's/`old-table-name`/`new-table-name`/g' old-table-name.dump file

for i in `cat cnt.txt` ;do echo $i; mysql --socket=/var/lib/SQL_3307/mysql/mysql_3307.sock -e "select count(1) from search_input.$i;"; done;

##12.31 inginx cache

##for i in $(mysql -Bse "show processlist" | grep -i "sleep" | awk '{print $1}') ;do mysql -e "kill $i;";done

##myqladmin flush-tables && mysqladmin flush-tables && mysqladmin flush-tables && service mysqld stop

###details##

LINE="##########################################################################################################";sudo cat /proc/sys/kernel/hostname > /root/details_`date +%d%b%Y` ; sudo echo $LINE >> /root/details_`date +%d%b%Y` ; sudo /sbin/ifconfig -a >> /root/details_`date +%d%b%Y` ;sudo echo $LINE >> /root/details_`date +%d%b%Y`;sudo route -n >> /root/details_`date +%d%b%Y`; sudo echo $LINE >> /root/details_`date +%d%b%Y`;sudo cat /proc/net/bonding/bond0 >> /root/details_`date +%d%b%Y`;sudo echo $LINE >> /root/details_`date +%d%b%Y` ;sudo dmidecode -t system >> /root/details_`date +%d%b%Y` ; sudo echo $LINE >> /root/details_`date +%d%b%Y` ; sudo df -h >> /root/details_`date +%d%b%Y` ; sudo echo $LINE >> /root/details_`date +%d%b%Y` ; sudo free -g >> /root/details_`date +%d%b%Y` ;sudo echo $LINE >> /root/details_`date +%d%b%Y` ;sudo netstat -ntlp >> /root/details_`date +%d%b%Y` ; sudo echo $LINE >> /root/details_`date +%d%b%Y` ; sudo multipath -ll >> /root/details_`date +%d%b%Y` ;sudo echo -e "$LINE\n## WWN ##" >> /root/details_`date +%d%b%Y` ;cat /sys/class/fc_host/*/port_name >> /root/details_`date +%d%b%Y`; sudo echo $LINE >> /root/details_`date +%d%b%Y` ;sudo cat /etc/fstab >> /root/details_`date +%d%b%Y` ;sudo echo $LINE >> /root/details_`date +%d%b%Y` ; sudo mysqld_multi report >> /root/details_`date +%d%b%Y` ;sudo echo $LINE >> /root/details_`date +%d%b%Y` ; sudo ps auxf >> /root/details_`date +%d%b%Y` ;sudo echo $LINE >> /root/details_`date +%d%b%Y` ;sudo mount >> /root/details_`date +%d%b%Y`

LINE="###############################################################################################################";sudo cat /proc/sys/kernel/hostname > /root/details_`date +%d%b%Y` ; sudo echo $LINE >> /root/details_`date +%d%b%Y` ; sudo /sbin/ifconfig -a >> /root/details_`date +%d%b%Y` ; sudo echo $LINE >> /root/details_`date +%d%b%Y`;sudo cat /proc/net/bonding/bond0 >> /root/details_`date +%d%b%Y`;sudo echo $LINE >> /root/details_`date +%d%b%Y` ;sudo dmidecode -t system >> /root/details_`date +%d%b%Y` ; sudo echo $LINE >> /root/details_`date +%d%b%Y` ; sudo df -h >> /root/details_`date +%d%b%Y` ; sudo echo $LINE >> /root/details_`date +%d%b%Y` ; sudo free -g >> /root/details_`date +%d%b%Y` ;sudo echo $LINE >> /root/details_`date +%d%b%Y` ;sudo netstat -ntlp >> /root/details_`date +%d%b%Y` ;sudo echo $LINE >> /root/details_`date +%d%b%Y` ; DOCK_CONT=`sudo docker ps -q`; for i in $DOCK_CONT; do echo "docker ports : " >> /root/details_`date +%d%b%Y`; sudo docker port $i >> /root/details_`date +%d%b%Y`; done; sudo echo $LINE >> /root/details_`date +%d%b%Y` ; screen -ls >> /root/details_`date +%d%b%Y` ; sudo echo $LINE >> /root/details_`date +%d%b%Y` ; sudo multipath -ll >> /root/details_`date +%d%b%Y` ;sudo echo $LINE >> /root/details_`date +%d%b%Y` ;cat /sys/class/fc_host/*/port_name >> /root/details_`date +%d%b%Y`; sudo echo $LINE >> /root/details_`date +%d%b%Y` ;sudo cat /etc/fstab >> /root/details_`date +%d%b%Y` ;sudo echo $LINE >> /root/details_`date +%d%b%Y` ; sudo mysqld_multi report >> /root/details_`date +%d%b%Y` ;sudo echo $LINE >> /root/details_`date +%d%b%Y` ; sudo ps auxf >> /root/details_`date +%d%b%Y` ;sudo echo $LINE >> /root/details_`date +%d%b%Y` ;sudo mount >> /root/details_`date +%d%b%Y` ; echo "history from root before activity" >> /root/details_history_`date +%d%b%Y`; sudo echo $LINE >> /root/details_history_`date +%d%b%Y`; history >> /root/details_history_`date +%d%b%Y`;

###Varnish cache clear##

cd /scripts

ls -lrth | grep -i varnish

sh clear_all_cache_varnish.sh
##############################
cd /var/www/production/dataentry_pincodewise

#####checks###
nagios server
-------------
cd /etc/nagios/objects/

grep -Ril '172.29.8.227'

server
------

bkp 1. cd/usr/lib64/nagios/ >mv plugins/ plugins_bkp
--- 2 cd /etc/nagios >mv nrpe.cfg nrpe.cfg_bkp
3 cd /etc/xinetd.d/ > mv nrpe nrpe_bkp

scp from other server {plugins/ nrpe.cfg nrpe}
with same version of OS

cat /etc/nagios/nrpe.cfg

check ALL checks

nagios -v /etc/nagios/nagios.cfg

service nagios reload

service nagios status

##################

sed -i 33d /home/prashanth/.ssh/known_hosts

#######################################
ssh -i JD-Key.pem ec2-user@10.51.2.51

######################################

grep -i 'HTTP/1.1" 5..'

cat tpro-docker-4xx-5xx-log.html | grep -i 'HTTP/1.1" 404' | grep -i -v -E 'robots|dist|bookatable -----exclude words

######################################################################
How to Find a Specific String or Word in Files and Directories
######################################################################
link: https://www.tecmint.com/find-a-specific-string-or-word-in-files-and-directories/

grep -Rw ~/path/ or filename -e 'content'

{ -R --option tells grep to read all files under each directory, recursively,
-w instructs it to select only those lines containing matches that form whole words
-e is used to specify the string (pattern) to be searched.
-i To ignore case distinctions employ
( $ grep -Riw ~/bin/ -e 'check_root')
-n if you want to know the exact line where the string of text exist
( $ grep -Rinw ~/bin/ -e 'check_root')
ssuming there are several types of files in a directory you wish to search in, you can also specify the type of files to be searched for instance, by their extension using the --include option.

This example instructs grep to only look through all .sh files.

($grep -Rnw --include=\*.sh ~/bin/ -e 'check_root')
In addition, it is possible to search for more than one pattern, using the following command

($ grep -Rinw ~/bin/ -e 'check_root' -e 'netstat')

##################################################################################################################

free up ram cache

1 Clear PageCache only
# sync; echo 1 > /proc/sys/vm/drop_caches

2 Clear dentries and inodes
#sync; echo 2 > /proc/sys/vm/drop_caches

3 Clear PageCache, dentries and inodes
# sync; echo 3 > /proc/sys/vm/drop_caches

########################################################################################################
clear Swap Space

1 # swapoff -a && swapon -a

2 Now we will be combining both above commands into one single command to make a proper script to clear RAM Cache and Swap Space
#echo 3 > /proc/sys/vm/drop_caches && swapoff -a && swapon -a && printf '\n%s\n' 'Ram-cache and Swap Cleared'
OR

#su -c "echo 3 >'/proc/sys/vm/drop_caches' && swapoff -a && swapon -a && printf '\n%s\n' 'Ram-cache and Swap Cleared'" root

#####################################################################################################################################

kill sleep query

for i in $(mysql -Bse "show processlist;" | grep -i sleep | awk '{print $1}') ;do mysql -e "kill ${i}" ; done

##############################################################################################################################################

database size

mysql> SELECT table_schema AS "Database", SUM(data_length + index_length) / 1024 / 1024 / 1024 AS "Size (GB)" FROM information_schema.TABLES GROUP BY table_schema;

or

[root@12-53-idc mysql]# ll -lrth | grep -i db * | du -h

########################################################################################################

memory usage

ps -o pid,user,%mem,command ax | sort -b -k3 -r

#####################################################################################################

for loop

login to source server

-------------------------
create txt file[tbl.txt]
------------------------

#vim tbl.txt
{and copy tables}

#for i in `cat tbl.txt`;do echo $i;done

----------------------------------------------------
if table size more run it on screen to take dump
----------------------------------------------------

create screen[transfer]-

$sudo screen -S transfer

go to screen-

$sudo screen -r transfer

#for i in `cat tbl.txt`;do echo $i;sudo mysqldump search_input $i > $i.sql;done
------------------------------------------------------------------------------------------

scp to destination server

--------------------------------------

#for i in `cat tbl.txt `;do echo $i;scp $i web_backup@192.168.11.151:;done

restore
-------------
#for i in `cat tbl.txt `; do echo $i; mysql --socket=/SearchMis/SQL/mysql/mysqld1_3307.sock search_input < $i.sql;done

for i in 172.29.{0,8,16,26,32,40,50}.213 192.168.35.213 192.168.17.213 ;do scp tbl_top_5_percent_company_callcnt_searches_consolidated_180619.sql bhavesh@$i:;done

for i in `cat k.txt`;do echo $i;mysqldump dbteam_temp $i |gzip -fv > $i.sql.gz;done

mysql -Bse "flush tables;" && mysql -Bse "flush tables;" && mysql -Bse "flush tables;" && /etc/init.d/mysql stop

#################################################################################################################################################
check lag on all slaves

for i in `mysql -Bse "show slave hosts;" | awk {'print$2'}` ; do ssh -q web_backup@$i "sudo mysql -Bse 'show slave status\G;' | grep Seconds" ; done

#################################################################################################################

hardening and bonding

##################

22 [2019-11-27] [02:46:05] df -h
23 [2019-11-27] [02:46:05] cd /
24 [2019-11-27] [02:46:05] du -hsc *
25 [2019-11-27] [02:46:05] cd
26 [2019-11-27] [02:46:05] ip r l
27 [2019-11-27] [02:46:05] ping www.google.com
28 [2019-11-27] [02:46:05] cat /etc/redhat-release
29 [2019-11-27] [02:46:05] yum install vim net-tools wget sysstat stat device-mapper-multipath* vsftpd lftp psmisc utils.pm yum-utils
30 [2019-11-27] [02:46:05] dmidecode -t 1
31 [2019-11-27] [02:46:05] wget http://172.29.0.123/download/Centos7_configure.sh
32 [2019-11-27] [02:46:05] ll -lrth
33 [2019-11-27] [02:46:05] chmod +x Centos7_configure.sh
34 [2019-11-27] [02:46:05] ll -lrth
35 [2019-11-27] [02:46:05] ./Centos7_configure.sh
36 [2019-11-27] [02:46:05] yum update -y
37 [2019-11-27] [02:46:05] service NetworkManager status
38 [2019-11-27] [02:46:05] service NetworkManager stop
39 [2019-11-27] [02:46:05] service NetworkManager status
40 [2019-11-27] [02:46:05] ifconfig
41 [2019-11-27] [02:46:05] ip r l
42 [2019-11-27] [02:46:05] init 6
43 [2019-11-27] [02:42:12] history
44 [2019-11-27] [02:30:21] ifconfig
45 [2019-11-27] [02:30:35] ethtool enp3s0f0
46 [2019-11-27] [02:30:49] ethtool enp3s0f1
47 [2019-11-27] [02:31:00] ethtool ens1f0
48 [2019-11-27] [02:31:15] ethtool ens1f1
49 [2019-11-27] [02:31:29] ethtool ens1f2
50 [2019-11-27] [02:31:33] ethtool ens1f3
51 [2019-11-27] [02:31:42] ethtool enp3s0f0
52 [2019-11-27] [02:31:49] ethtool enp3s0f1
53 [2019-11-27] [02:31:58] ll -lrth
54 [2019-11-27] [02:32:07] ifconfig
55 [2019-11-27] [02:32:56] ethtool enp3s0f0
56 [2019-11-27] [02:33:04] ethtool enp3s0f1
57 [2019-11-27] [02:34:23] ll -lrth
58 [2019-11-27] [02:34:29] ./Centos7_configure.sh
59 [2019-11-27] [02:35:13] service network status
60 [2019-11-27] [02:35:29] service network restart
61 [2019-11-27] [02:37:41] ifconfig
62 [2019-11-27] [02:37:57] cat /proc/net/bonding/bond0
63 [2019-11-27] [02:38:48] ip r l
64 [2019-11-27] [02:39:34] ifdown enp3s0f0
65 [2019-11-27] [02:39:37] cat /proc/net/bonding/bond0
66 [2019-11-27] [02:40:45] ifup enp3s0f0
67 [2019-11-27] [02:40:50] cat /proc/net/bonding/bond0
68 [2019-11-27] [02:41:04] ifdown enp3s0f1
69 [2019-11-27] [02:41:06] cat /proc/net/bonding/bond0
70 [2019-11-27] [02:42:43] ifup enp3s0f1
71 [2019-11-27] [02:42:45] cat /proc/net/bonding/bond0
72 [2019-11-27] [02:45:02] history

cssh 192.168.13.{138,158} 192.168.11.{217,218} 192.168.39.{85,86} 192.168.17.{156,187} 192.168.35.190 -l bhavesh {girl

table size

select (data_length+index_length)/1024/1024/1024 from information_schema.TABLES where table_name='temp_vn_answered_calls_remote2' ;

######prasad####

713 [2020-02-08] [18:21:09] cat /etc/resolv.conf
714 [2020-02-08] [18:21:16] sudo nslookup smtpbp.falconide.com 115.112.18.130
715 [2020-02-08] [18:22:44] sudo nslookup smtpbp.falconide.com 115.112.18.22
716 [2020-02-08] [18:23:10] sudo tcptraceroute smtpbp.falconide.com 25
717 [2020-02-08] [18:24:34] ping 115.112.18.130 -c 100
718 [2020-02-08] [18:44:03] history

####### stop pm2############
Step 1 : su web_backup

Step 2 : pm2 ls
┌───────────┬────┬─────────┬─────────┬───────┬────────┬─────────┬────────┬──────┬────────────┬────────────┬──────────┐
│ App name │ id │ version │ mode │ pid │ status │ restart │ uptime │ cpu │ mem │ user │ watching │
├───────────┼────┼─────────┼─────────┼───────┼────────┼─────────┼────────┼──────┼────────────┼────────────┼──────────┤
│ jdboxNode │ 30 │ 1.0.0 │ cluster │ 27752 │ online │ 0 │ 27D │ 0.1% │ 107.0 MB │ web_backup │ disabled │
│ jdboxNode │ 35 │ 1.0.0 │ cluster │ 27794 │ online │ 0 │ 27D │ 0.1% │ 105.4 MB │ web_backup │ disabled │
│ jdboxNode │ 34 │ 1.0.0 │ cluster │ 27784 │ online │ 0 │ 27D │ 0% │ 80.0 MB │ web_backup │ disabled │
│ jdboxNode │ 33 │ 1.0.0 │ cluster │ 27774 │ online │ 0 │ 27D │ 0.1% │ 83.9 MB │ web_backup │ disabled │
│ jdboxNode │ 32 │ 1.0.0 │ cluster │ 27764 │ online │ 0 │ 27D │ 0% │ 99.8 MB │ web_backup │ disabled │
│ jdboxNode │ 31 │ 1.0.0 │ cluster │ 27758 │ online │ 0 │ 27D │ 0.1% │ 125.9 MB │ web_backup │ disabled │
│ jdfinance │ 5 │ 0.0.1 │ cluster │ 26519 │ online │ 992 │ 8m │ 0% │ 55.9 MB │ web_backup │ disabled │
│ jdfinance │ 4 │ 0.0.1 │ cluster │ 26155 │ online │ 1006 │ 9m │ 0% │ 55.2 MB │ web_backup │ disabled │
│ jdfinance │ 3 │ 0.0.1 │ cluster │ 25683 │ online │ 1009 │ 10m │ 0% │ 62.7 MB │ web_backup │ disabled │
│ jdtree │ 1 │ 0.0.1 │ cluster │ 8951 │ online │ 0 │ 27D │ 0% │ 55.8 MB │ web_backup │ disabled │
│ jdtree │ 2 │ 0.0.1 │ cluster │ 8957 │ online │ 0 │ 27D │ 0% │ 52.9 MB │ web_backup │ disabled │
│ jdtree │ 0 │ 0.0.1 │ cluster │ 8945 │ online │ 0 │ 27D │ 0% │ 55.8 MB │ web_backup │ disabled │
└───────────┴────┴─────────┴─────────┴───────┴────────┴─────────┴────────┴──────┴────────────┴────────────┴──────────┘
Use `pm2 show ` to get more details about an app

Step 3 : copy details of each service in pm2

Example : pm2 info jdboxNode

Step 4 : pm2 stop jdboxNod

Step 5 : check the PM2 list whether all the service stoped or not

pm2 l

####################################################################
https://geek-university.com/linux/essential-linux-commands/

##############################################

Add or remove mobile number

987 [2020-02-25] [17:49:17] cd /etc/nagios/smsgrp_files/
988 [2020-02-25] [17:49:19] ls -lrth
989 [2020-02-25] [17:49:29] grep -Ril '8189886956' .
990 [2020-02-25] [17:49:34] vim ./smsgrp_bangalore_noc
991 [2020-02-25] [17:49:50] vim ./smsgrp_bangalore_voice
###################################################################

Aws nagios

105 wget http://172.29.0.123/download/nagios_3.5.tar.gz
110 wget http://172.29.0.123/download/nagios_3.5.tar.gz
112 tar -xvf nagios_3.5.tar.gz
114 cd nagios_3.5/
116 yum install nagios-nrpe-2.14-1.el6.rf.x86_64.rpm
118 yum install nagios-plugins-nrpe
119 tar xvf nagios-plugins-2.1.1.tar.gz
121 cd nagios-plugins-2.1.1
123 yum install nagios-nrpe
124 rpm -qa | nagios
125 rpm -qa |grep nagios
128 mv nrpe.cfg /etc/nagios/
129 cd /etc/nagios/
134 mv nrpe.cfg /etc/nagios/
135 cd /etc/nagios/
141 mv nrpe.cfg /etc/nagios/
143 cd /usr/lib64/nagios/

###############################################################

macth text files

comm -2 -3 <( sort cron_list ) <( sort cron_list5 ) > cron_list6

#passworsless###

SHA256:3WSQRE6SzKRXitEvbkempJc84QAayleRDs4P+COF2Qs root@prashanth

####mailq###
[root@45-171-chennai ~]# cat /etc/resolv.conf

[root@45-171-chennai ~]# stat /etc/resolv.conf

cat /var/log/maillog | grep -i stat

[root@45-171-chennai ~]# traceroute smtpbp.falconide.com

[root@45-171-chennai ~]# ping smtpbp.falconide.com -c 10

############################

Add mobiles numer to scripts

sudo sh /scripts/standard_sms_sending_script.sh -f /scripts/b2b_shopfront_sphinx_sms.txt -m "b2b_shopfront_sphinx.sh has been failed on 192.168.24.215"

######################################
check slave lag from master

for i in `mysql -Bse "show slave hosts;" | awk {'print$2'}` ; do ssh -q web_backup@$i "sudo mysql -Bse 'show slave status\G;' | grep Seconds" ; done
###############################
read logs as Human readble

cat /usr/local/nagios/var/nagios.log | perl -pe 's/(\d+)/localtime($1)/e'
###########################################################################
### Mysql###
show grants for 'username'@'machineip;

Select user, host from mysql.user;

Select user, host from mysql.user where (host/user) like '%(ip/username%';

show tables from dbname;

SHOW TABLES FROM dbname LIKE "tbl%";
############# rsync#########
rsync -avrpP username@IP:/path/* . ##### Reverse